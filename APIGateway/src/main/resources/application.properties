spring.application.name=APIGateway
server.port=8080



cloud:
gateway:
# Configuración global de CORS
globalcors:
cors-configurations:
'[/**]':
allowedOrigins: "*"
allowedMethods:
- GET
- POST
- PUT
- DELETE
- PATCH
- OPTIONS
allowedHeaders: "*"

# Definición de rutas
routes:
# ============ MS GESTION DE COSTOS Y TARIFAS ============
- id: tarifas-service
uri: http://localhost:8081
predicates:
- Path=/api/tarifas/**
filters:
- RewritePath=/api/tarifas/(?<segment>.*), /api/tarifas/${segment}

# ============ MS GESTION DE INFRAESTRUCTURA ============
- id: contenedores-service
uri: http://localhost:8082
predicates:
- Path=/api/contenedores/**
filters:
- RewritePath=/api/contenedores/(?<segment>.*), /api/contenedores/${segment}

- id: depositos-service
uri: http://localhost:8082
predicates:
- Path=/api/depositos/**
filters:
- RewritePath=/api/depositos/(?<segment>.*), /api/depositos/${segment}

# ============ MS GESTION DE OPERACIONES ============
- id: solicitudes-service
uri: http://localhost:8083
predicates:
- Path=/api/solicitudes-traslado/**
filters:
- RewritePath=/api/solicitudes-traslado/(?<segment>.*), /api/solicitudes-traslado/${segment}

- id: clientes-service
uri: http://localhost:8083
predicates:
- Path=/api/clientes/**
filters:
- RewritePath=/api/clientes/(?<segment>.*), /api/clientes/${segment}

- id: rutas-service
uri: http://localhost:8083
predicates:
- Path=/api/rutas/**
filters:
- RewritePath=/api/rutas/(?<segment>.*), /api/rutas/${segment}

- id: tramos-service
uri: http://localhost:8083
predicates:
- Path=/api/tramos/**
filters:
- RewritePath=/api/tramos/(?<segment>.*), /api/tramos/${segment}

# ============ MS GESTION DE TRANSPORTE ============
- id: transporte-service
uri: http://localhost:8084
predicates:
- Path=/api/transportes/**,/api/camiones/**,/api/conductores/**
filters:
- RewritePath=/api/(?<segment>.*), /api/${segment}

# Actuator para health checks
management:
endpoints:
web:
exposure:
include: health,info,gateway
endpoint:
health:
show-details: always

# Logging
logging:
level:
org.springframework.cloud.gateway: DEBUG
reactor.netty: INFO